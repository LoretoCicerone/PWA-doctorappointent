<ng-container>
    <!-- Filter -->
    <ng-container style="width: 100%;" *ngIf="isFilterable" [matColumnDef]="this.rowActionIcon">
        <mat-form-field>
            <mat-label>Filter</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="filter">
        </mat-form-field>
    </ng-container>

    <!-- Table -->
    <table style="width: 100%;" mat-table [dataSource]="tableContent | async" matSort
        (matSortChange)="sortTable($event)">

        <!-- action column -->
        <ng-container>
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element" [id]="rowActionIcon" (click)="onRowSelect(element)">
                <button mat-button>
                    <mat-icon>remove_shopping_cart</mat-icon>
                </button>
            </td>
        </ng-container>
        <ng-container *ngFor="let tableColumn of tableColumns" [matColumnDef]="tableColumn.name">

            <!-- if sortable column header -->
            <ng-container *ngIf="tableColumn.isSortable; else notSortable">
                <th mat-header-cell *matHeaderCellDef [mat-sort-header]="tableColumn.name"
                    [arrowPosition]="tableColumn.position === 'right' ? 'before' : 'after'">
                    {{tableColumn.name | translate}}
                </th>
            </ng-container>
            <!-- else not sortable -->
            <ng-template #notSortable>
                <th mat-header-cell *matHeaderCellDef [class.text-right]="tableColumn.position == 'right'">
                    {{tableColumn.name | translate}}
                </th>
            </ng-template>

            <!-- column data -->
            <div *ngIf="tableColumn.dataKey !== 'patient'">
            <td mat-cell (click)="onRowSelect(element)" class="rowSelect" *matCellDef="let element"
                [class.text-right]="tableColumn.position == 'right'">
                {{element[tableColumn.dataKey]}}
            </td>
            </div>

            <div *ngIf="tableColumn.dataKey === 'patient'">
                <td mat-cell (click)="onRowSelect(element)" class="rowSelect" *matCellDef="let element"
                    [class.text-right]="tableColumn.position == 'right'">
                    {{element[tableColumn.dataKey].name}}
                </td>
            </div>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <!-- Pagination -->
    <mat-paginator *ngIf="isPageable" [pageSizeOptions]="paginationSizes" [pageSize]="defaultPageSize"
        showFirstLastButtons>
    </mat-paginator>
</ng-container>
<!-- <table class="table table-striped" style="width: 100%;">
    <thead>
      <tr class="head">
        <th *ngFor="let columnHead of tableColumns">{{ columnHead.name }}</th>
      </tr>
    </thead>
    <tbody>
        <tr *ngFor="let columnData of (tableContent | async)" class="body" (click)="onRowSelect(columnData)">
          <td *ngFor="let columnHead of tableColumns">
            {{ columnData[columnHead.dataKey] }}
          </td>
        </tr>
    </tbody>
  </table> -->